<style>
  .l8-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }
  .l8-full {
    grid-column: 1 / -1;
  }
  .control-group {
    padding: 12px;
    border: 1px solid #333;
    border-radius: 4px;
    background: rgba(255,255,255,0.02);
  }
  .control-group h3 {
    font-size: 12px;
    text-transform: uppercase;
    color: #666;
    margin: 0 0 8px 0;
    letter-spacing: 0.05em;
  }
  .l8-compact-label {
    font-size: 11px;
    margin-bottom: 4px;
    display: flex;
    justify-content: space-between;
  }
  .l8-compact-input {
    margin-top: 2px !important;
  }
  .btn-group {
    display: flex;
    gap: 4px;
  }
  .btn-group .btn {
    flex: 1;
    padding: 6px 4px;
    font-size: 11px;
  }
  /* Main layout: Canvases on top, controls underneath */
  .l8-main-grid {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  /* Canvases row - side by side, 50% each */
  .l8-canvas-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }

  /* Controls grid - responsive multi-column layout */
  .l8-controls-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 12px;
  }

  .l8-panel {
    min-width: 0; /* Prevent grid blowout */
  }
</style>

<div class="main-header" style="margin-bottom: 16px;">
  <h2>Layer 8 â€” Layout Engine</h2>
  <p>Flexbox & Anchor positioning playground.</p>
</div>

<div class="card l8-main-grid">
  <!-- Canvases: Flex and Anchor Demos Side-by-Side -->
  <div class="l8-canvas-row">
    <!-- Flex Preview -->
    <div class="l8-panel">
      <h3 style="margin-top:0; font-size:14px; color:#ccc; margin-bottom:12px;">Flex Layout</h3>
      <canvas id="l8-layout-canvas" style="border:1px dashed #555; border-radius:6px; background:#1a1a2e; margin-bottom:8px;"></canvas>

      <div style="display:flex; gap:16px; font-size:11px; color:#888; justify-content: space-between; align-items: center;">
        <div>
          <span style="margin-right:12px">Time: <strong id="l8-stat-time" style="color:#eee">0.00</strong>ms</span>
          <span style="margin-right:12px">Children: <strong id="l8-stat-children" style="color:#eee">0</strong></span>
          <span>Size: <strong id="l8-stat-size" style="color:#eee">350x300</strong></span>
        </div>
      </div>
    </div>

    <!-- Anchor Preview -->
    <div class="l8-panel">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <h3 style="margin:0; font-size:14px; color:#ccc;">Anchor Layout</h3>
        <div style="display:flex; gap:12px;">
          <label class="control-label" style="font-size:11px; margin:0; display:flex; align-items:center; gap:4px;">
            W <span id="l8-aw-val" class="control-value" style="font-size:11px; min-width:2em;">350</span>
            <input type="range" id="l8-ctrl-aw" min="200" max="600" value="350" style="width:60px; height:2px; margin:0;">
          </label>
          <label class="control-label" style="font-size:11px; margin:0; display:flex; align-items:center; gap:4px;">
            H <span id="l8-ah-val" class="control-value" style="font-size:11px; min-width:2em;">300</span>
            <input type="range" id="l8-ctrl-ah" min="150" max="500" value="300" style="width:60px; height:2px; margin:0;">
          </label>
        </div>
      </div>
      <canvas id="l8-anchor-canvas" style="border:1px dashed #555; border-radius:6px; background:#1a1a2e; width:100%;"></canvas>
      <p style="color:#666; font-size:11px; margin-top:8px; line-height:1.4;">
        Anchors position elements relative to container edges.
      </p>
    </div>
  </div>

  <!-- Controls: Multi-column grid -->
  <div class="l8-controls-grid">
    <!-- Container Controls -->
    <div class="control-group">
      <h3>Container</h3>
      <div class="l8-grid">
        <label class="control-label l8-compact-label">
          Width <span id="l8-cw-val" class="control-value">350</span>
          <input type="range" id="l8-ctrl-cw" min="150" max="600" value="350" class="l8-compact-input">
        </label>
        <label class="control-label l8-compact-label">
          Height <span id="l8-ch-val" class="control-value">300</span>
          <input type="range" id="l8-ctrl-ch" min="100" max="500" value="300" class="l8-compact-input">
        </label>

        <label class="control-label l8-compact-label l8-full">
          Display
          <select id="l8-ctrl-display" style="margin-top:2px; padding:4px;">
            <option value="flex" selected>flex</option>
            <option value="manual">manual</option>
          </select>
        </label>

        <label class="control-label l8-compact-label">
          Direction
          <select id="l8-ctrl-direction" style="margin-top:2px; padding:4px;">
            <option value="row" selected>row</option>
            <option value="column">column</option>
          </select>
        </label>
        <label class="control-label l8-compact-label">
          Wrap
          <select id="l8-ctrl-wrap" style="margin-top:2px; padding:4px;">
            <option value="nowrap" selected>nowrap</option>
            <option value="wrap">wrap</option>
          </select>
        </label>

        <label class="control-label l8-compact-label">
          Justify
          <select id="l8-ctrl-justify" style="margin-top:2px; padding:4px;">
            <option value="start" selected>start</option>
            <option value="center">center</option>
            <option value="end">end</option>
            <option value="space-between">space-btwn</option>
            <option value="space-around">space-arnd</option>
          </select>
        </label>
        <label class="control-label l8-compact-label">
          Align
          <select id="l8-ctrl-align" style="margin-top:2px; padding:4px;">
            <option value="start" selected>start</option>
            <option value="center">center</option>
            <option value="end">end</option>
            <option value="stretch">stretch</option>
          </select>
        </label>

        <label class="control-label l8-compact-label">
          Gap <span id="l8-gap-val" class="control-value">8</span>
          <input type="range" id="l8-ctrl-gap" min="0" max="40" value="8" class="l8-compact-input">
        </label>
        <label class="control-label l8-compact-label">
          Pad <span id="l8-padding-val" class="control-value">10</span>
          <input type="range" id="l8-ctrl-padding" min="0" max="40" value="10" class="l8-compact-input">
        </label>
        <label class="control-label l8-compact-label">
          Margin <span id="l8-margin-val" class="control-value">0</span>
          <input type="range" id="l8-ctrl-margin" min="0" max="40" value="0" class="l8-compact-input">
        </label>
      </div>
    </div>

    <!-- Selected Child Controls -->
    <div class="control-group">
      <h3>Selected Child <span id="l8-child-info" style="font-weight:normal; text-transform:none; float:right; color:#888;">(None)</span></h3>

      <div class="l8-grid">
        <label class="control-label l8-compact-label">
          Grow <span id="l8-grow-val" class="control-value">0</span>
          <input type="range" id="l8-ctrl-grow" min="0" max="5" value="0" step="1" class="l8-compact-input">
        </label>
        <label class="control-label l8-compact-label">
          Shrink <span id="l8-shrink-val" class="control-value">1</span>
          <input type="range" id="l8-ctrl-shrink" min="0" max="5" value="1" step="1" class="l8-compact-input">
        </label>

        <label class="control-label l8-compact-label">
          Width <span id="l8-width-val" class="control-value">60</span>
          <input type="range" id="l8-ctrl-width" min="20" max="200" value="60" class="l8-compact-input">
        </label>
        <label class="control-label l8-compact-label">
          Height <span id="l8-height-val" class="control-value">40</span>
          <input type="range" id="l8-ctrl-height" min="20" max="150" value="40" class="l8-compact-input">
        </label>

        <label class="control-label l8-compact-label l8-full" style="justify-content:flex-start; gap:8px;">
          <input type="checkbox" id="l8-child-visible" checked> Visible (Layout + Paint)
        </label>
        <label class="control-label l8-compact-label l8-full" style="justify-content:flex-start; gap:8px;">
          Render:
          <select id="l8-child-display" style="padding:2px; margin-left:auto;">
            <option value="visible" selected>Visible</option>
            <option value="hidden">Hidden (Layout only)</option>
          </select>
        </label>

        <div class="btn-group" style="margin-top:8px;">
          <button id="l8-btn-add" class="btn">+ Add</button>
          <button id="l8-btn-remove" class="btn">- Del</button>
          <button id="l8-btn-reset" class="btn">Reset</button>
        </div>
      </div>
    </div>

    <!-- Overlays -->
    <div class="control-group">
      <h3>Overlays</h3>
      <div class="l8-grid">
        <label style="display:flex; align-items:center; gap:6px; font-size:11px; color:#aaa;">
          <input type="checkbox" id="l8-ctrl-show-padding"> Padding
        </label>
        <label style="display:flex; align-items:center; gap:6px; font-size:11px; color:#aaa;">
          <input type="checkbox" id="l8-ctrl-show-margins"> Margins
        </label>
      </div>
    </div>
  </div>
</div>
