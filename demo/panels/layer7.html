<div class="main-header">
  <h2>Layer 7 — Scene & Layering System</h2>
  <p>
    A Scene manages the DOM container, multiple canvas layers, and the rendering pipeline.
    Layers can be created, z-ordered, and have independent opacity settings.
  </p>
</div>

<div class="card">
  <h3>Two-Layer Scene Demo</h3>
  <p>
    Background layer (static shapes) and foreground layer (animated elements).
    Use the controls to adjust layer opacity and see how layers composite.
  </p>

  <div id="layer7-container" style="width: 400px; height: 300px; margin: 20px 0; border: 1px solid var(--border);"></div>

  <div class="control-group">
    <label>Background Layer Opacity: <span id="bg-opacity-val">1.0</span></label>
    <input type="range" id="ctrl-bg-opacity" min="0" max="1" step="0.1" value="1">
  </div>

  <div class="control-group">
    <label>Background Layer Blend Mode:</label>
    <select id="ctrl-bg-blend">
      <option value="normal">Normal</option>
      <option value="multiply">Multiply</option>
      <option value="screen">Screen</option>
      <option value="overlay">Overlay</option>
      <option value="darken">Darken</option>
      <option value="lighten">Lighten</option>
      <option value="color-dodge">Color Dodge</option>
      <option value="color-burn">Color Burn</option>
      <option value="hard-light">Hard Light</option>
      <option value="soft-light">Soft Light</option>
      <option value="difference">Difference</option>
      <option value="exclusion">Exclusion</option>
      <option value="hue">Hue</option>
      <option value="saturation">Saturation</option>
      <option value="color">Color</option>
      <option value="luminosity">Luminosity</option>
    </select>
  </div>

  <div class="control-group">
    <label>Foreground Layer Opacity: <span id="fg-opacity-val">1.0</span></label>
    <input type="range" id="ctrl-fg-opacity" min="0" max="1" step="0.1" value="1">
  </div>

  <div class="control-group">
    <label>Foreground Layer Blend Mode:</label>
    <select id="ctrl-fg-blend">
      <option value="normal">Normal</option>
      <option value="multiply">Multiply</option>
      <option value="screen">Screen</option>
      <option value="overlay">Overlay</option>
      <option value="darken">Darken</option>
      <option value="lighten">Lighten</option>
      <option value="color-dodge">Color Dodge</option>
      <option value="color-burn">Color Burn</option>
      <option value="hard-light">Hard Light</option>
      <option value="soft-light">Soft Light</option>
      <option value="difference">Difference</option>
      <option value="exclusion">Exclusion</option>
      <option value="hue">Hue</option>
      <option value="saturation">Saturation</option>
      <option value="color">Color</option>
      <option value="luminosity">Luminosity</option>
    </select>
  </div>

  <div class="control-group">
    <label>Animation Speed: <span id="speed-val">1.0x</span></label>
    <input type="range" id="ctrl-speed" min="0" max="2" step="0.1" value="1">
  </div>

  <div class="info-grid">
    <div class="info-item">
      <span class="label">Scene Size:</span>
      <span class="value" id="stat-size">800×600</span>
    </div>
    <div class="info-item">
      <span class="label">DPR:</span>
      <span class="value" id="stat-dpr">—</span>
    </div>
    <div class="info-item">
      <span class="label">Layer Count:</span>
      <span class="value" id="stat-layers">2</span>
    </div>
    <div class="info-item">
      <span class="label">FPS:</span>
      <span class="value" id="stat-fps">—</span>
    </div>
  </div>
</div>

<div class="card">
  <h3>Features Demonstrated</h3>
  <ul>
    <li><strong>Multi-layer rendering:</strong> Background and foreground on separate canvases</li>
    <li><strong>Layer ordering:</strong> CSS z-index controls layer stacking order</li>
    <li><strong>Layer opacity:</strong> Independent opacity control for each layer</li>
    <li><strong>Layer blend modes:</strong> CSS mix-blend-mode for layer compositing effects</li>
    <li><strong>DPI scaling:</strong> Automatic devicePixelRatio handling</li>
    <li><strong>Frame pipeline:</strong> Ticker → Update → Render → Paint</li>
    <li><strong>Element lookup:</strong> getElementById() index</li>
  </ul>
</div>
